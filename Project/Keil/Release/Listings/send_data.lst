C51 COMPILER V9.60.7.0   SEND_DATA                                                         07/11/2025 11:11:28 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE SEND_DATA
OBJECT MODULE PLACED IN .\Release\Objects\send_data.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\User\send_data.c LARGE OPTIMIZE(9,SIZE) BROWSE ORDER INTVECTOR(0X0
                    -00C) INCDIR(..\..\Libraries\Include;..\..\User;..\..\User\lib;..\..\Hardware) INTERVAL(3) DEBUG OBJECTEXTEND PRINT(.\Rel
                    -ease\Listings\send_data.lst) OBJECT(.\Release\Objects\send_data.obj)

line level    source

   1          #include "send_data.h"
   2          
   3          /**
   4           * @brief é€šè¿‡ä¸²å£å‘é€æ•°æ®
   5           *
   6           * @param instruct æŒ‡ä»¤
   7           * @param send_data å¾…å‘é€çš„æ•°æ®ï¼Œå¦‚æœè¦å‘é€æ—¶é—´ï¼Œè¯¥å‚æ•°æ— æ•ˆï¼Œå› ä¸ºæ—¶é—´ä¿¡æ¯ä¸€å…
             -±7ä¸ªå­—èŠ‚
   8           */
   9          void send_data(u8 instruct, u32 send_data)
  10          {
  11   1          u32 check_num = 0; // å­˜æ”¾æ ¡éªŒå’Œ
  12   1      
  13   1          uart0_sendbyte(FORMAT_HEAD); // å…ˆå‘é€æ ¼å¼å¤´
  14   1      
  15   1          check_num += FORMAT_HEAD; // ä½¿ç”¨if()è¯­å¥æ—¶ï¼Œæ‰ä½¿ç”¨è¿™ä¸€æ¡ç¨‹åº
  16   1      
  17   1          if (SEND_GEAR == instruct ||                /* å‘é€æŒ¡ä½çš„çŠ¶æ€ */
  18   1              SEND_BATTERY == instruct ||             /* å‘é€ç”µæ± ç”µé‡çš„çŠ¶æ€ */
  19   1              SEND_BARKE == instruct ||               /* å‘é€åˆ¹è½¦çš„çŠ¶æ€ */
  20   1              SEND_LEFT_TURN == instruct ||           /* å‘é€å·¦è½¬å‘ç¯çš„çŠ¶æ€ */
  21   1              SEND_RIGHT_TURN == instruct ||          /* å‘é€å³è½¬å‘ç¯çš„çŠ¶æ€ */
  22   1              SEND_HIGH_BEAM == instruct ||           /* å‘é€è¿œå…‰ç¯çš„çŠ¶æ€ */
  23   1              SEND_FUEL == instruct ||                /* å‘é€æ²¹é‡ */
  24   1              SEND_WATER_TEMP == instruct ||          /* å‘é€æ°´æ¸© */
  25   1              SEND_TEMP_OF_WATER_ALERT == instruct || /* å‘é€æ°´æ¸©æŠ¥è­¦ */
  26   1              SEND_MALFUNCTION_STATUS == instruct ||  /* å‘é€æ•…éšœçš„çŠ¶æ€ */
  27   1              SEND_ABS_STATUS == instruct             /* å‘é€ABSçš„çŠ¶æ€ */
  28   1              )                                       // å¦‚æœæŒ‡ä»¤çš„æ€»é•¿åº¦åªæœ‰5ä¸ªå­—èŠ‚
  29   1          {
  30   2              uart0_sendbyte(0x05);     // å‘é€æŒ‡ä»¤çš„æ€»é•¿åº¦
  31   2              uart0_sendbyte(instruct); // å‘é€æŒ‡ä»¤
  32   2              uart0_sendbyte(send_data);
  33   2      
  34   2              check_num += 0x05 + (u8)instruct + (u8)send_data;
  35   2          }
  36   1          else if (SEND_ENGINE_SPEED == instruct ||    /* å‘é€å‘åŠ¨æœºçš„è½¬é€Ÿ */
  37   1                   SEND_SPEED == instruct ||           /* å‘é€æ—¶é€Ÿ */
  38   1                   SEND_VOLTAGE_OF_BATTERY == instruct /* å‘é€ç”µæ± ç”µå‹ */
  39   1                   )                                   // å¦‚æœæŒ‡ä»¤çš„æ€»é•¿åº¦ä¸º6ä¸ªå­—èŠ‚
  40   1          {
  41   2              uart0_sendbyte(0x06);           // å‘é€æŒ‡ä»¤çš„æ€»é•¿åº¦
  42   2              uart0_sendbyte(instruct);       // å‘é€æŒ‡ä»¤
  43   2              uart0_sendbyte(send_data >> 8); // å‘é€ä¿¡æ¯
  44   2              uart0_sendbyte(send_data);      // å‘é€ä¿¡æ¯
  45   2      
  46   2              check_num += 0x06 + (u8)instruct + (u8)(send_data >> 8) + (u8)(send_data);
  47   2          }
  48   1          else if (SEND_TOTAL_MILEAGE == instruct ||      /* å‘é€å¤§è®¡é‡Œç¨‹ */
  49   1                   SEND_SUBTOTAL_MILEAGE == instruct ||   /* å‘é€å°è®¡é‡Œç¨‹ */
  50   1                   SEND_SUBTOTAL_MILEAGE_2 == instruct || /* å‘é€å°è®¡é‡Œç¨‹2 */
  51   1                   SEND_TOUCH_KEY_STATUS == instruct      /* å‘é€è§¦æ‘¸æŒ‰é”®çš„çŠ¶æ€ */
  52   1                   )                                      // å¦‚æœæŒ‡ä»¤çš„æ€»é•¿åº¦ä¸º7ä¸ªå­—èŠ‚
C51 COMPILER V9.60.7.0   SEND_DATA                                                         07/11/2025 11:11:28 PAGE 2   

  53   1          {
  54   2      
  55   2              uart0_sendbyte(0x07);     // å‘é€æŒ‡ä»¤çš„æ€»é•¿åº¦
  56   2              uart0_sendbyte(instruct); // å‘é€æŒ‡ä»¤
  57   2      
  58   2              uart0_sendbyte(send_data >> 16); // å‘é€ä¿¡æ¯
  59   2              uart0_sendbyte(send_data >> 8);  // å‘é€ä¿¡æ¯
  60   2              uart0_sendbyte(send_data);       // å‘é€ä¿¡æ¯
  61   2      
  62   2              check_num += 0x07 + (u8)instruct + (u8)(send_data >> 16) + (u8)(send_data >> 8) + (u8)send_data;
  63   2          }
  64   1          // else if (SEND_DATE == instruct /* å‘é€æ—¥æœŸ(å¹´æœˆæ—¥) */
  65   1          //          )                     // å¦‚æœæŒ‡ä»¤çš„æ€»é•¿åº¦ä¸º8ä¸ªå­—èŠ‚
  66   1          // {
  67   1          //     uart0_sendbyte(0x08);     // å‘é€æŒ‡ä»¤çš„æ€»é•¿åº¦
  68   1          //     uart0_sendbyte(instruct); // å‘é€æŒ‡ä»¤
  69   1      
  70   1          //     uart0_sendbyte(send_data >> 24); // å‘é€ä¿¡æ¯
  71   1          //     uart0_sendbyte(send_data >> 16); // å‘é€ä¿¡æ¯
  72   1          //     uart0_sendbyte(send_data >> 8);  // å‘é€ä¿¡æ¯
  73   1          //     uart0_sendbyte(send_data);       // å‘é€ä¿¡æ¯
  74   1      
  75   1          //     check_num += 0x08 + (u8)instruct + (u8)(send_data >> 24) + (u8)(send_data >> 16) + (u8)(send_da
             -ta >> 8) + (u8)send_data;
  76   1          // }
  77   1          else if (SEND_TIME == instruct /* å‘é€æ—¶é—´ */)
  78   1          {
  79   2              uart0_sendbyte(0x0B);      // å‘é€æŒ‡ä»¤çš„æ€»é•¿åº¦
  80   2              uart0_sendbyte(SEND_TIME); // å‘é€æŒ‡ä»¤
  81   2      
  82   2              // uart0_sendbyte(send_data >> 24); // å‘é€ä¿¡æ¯
  83   2              // uart0_sendbyte(send_data >> 16); // å‘é€ä¿¡æ¯
  84   2              // uart0_sendbyte(send_data >> 8);  // å‘é€ä¿¡æ¯
  85   2              // uart0_sendbyte(send_data);       // å‘é€ä¿¡æ¯
  86   2      
  87   2              uart0_sendbyte(fun_info.aip1302_saveinfo.year >> 8);
  88   2              uart0_sendbyte(fun_info.aip1302_saveinfo.year & 0xFF);
  89   2              uart0_sendbyte(fun_info.aip1302_saveinfo.month);
  90   2              uart0_sendbyte(fun_info.aip1302_saveinfo.day);
  91   2              uart0_sendbyte(fun_info.aip1302_saveinfo.time_hour);
  92   2              uart0_sendbyte(fun_info.aip1302_saveinfo.time_min);
  93   2              uart0_sendbyte(fun_info.aip1302_saveinfo.time_sec);
  94   2      
  95   2              check_num += 0x0B +
  96   2                           (u8)SEND_TIME +
  97   2                           (u8)(fun_info.aip1302_saveinfo.year >> 8) +
  98   2                           (u8)(fun_info.aip1302_saveinfo.year & 0xFF) +
  99   2                           (u8)(fun_info.aip1302_saveinfo.month) +
 100   2                           (u8)(fun_info.aip1302_saveinfo.day) +
 101   2                           (u8)(fun_info.aip1302_saveinfo.time_hour) +
 102   2                           (u8)(fun_info.aip1302_saveinfo.time_min) +
 103   2                           (u8)(fun_info.aip1302_saveinfo.time_sec);
 104   2          }
 105   1      
 106   1          // check_num &= 0x0F;         // å–å‰é¢çš„æ•°å­—ç›¸åŠ çš„ä½å››ä½
 107   1          check_num &= 0xFF;         // å–å‰é¢çš„æ•°å­—ç›¸åŠ çš„ä½å…«ä½
 108   1          uart0_sendbyte(check_num); // å‘é€æ ¡éªŒå’Œ
 109   1      
 110   1          delay_ms(1);
 111   1          // delay_ms(10); // æ¯æ¬¡å‘é€å®Œæˆåï¼Œå»¶æ—¶10ms
 112   1      }

C51 COMPILER V9.60.7.0   SEND_DATA                                                         07/11/2025 11:11:28 PAGE 3   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    580    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       9
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
