C51 COMPILER V9.60.7.0   TEMP_OF_WATER                                                     07/11/2025 11:11:29 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE TEMP_OF_WATER
OBJECT MODULE PLACED IN .\Release\Objects\temp_of_water.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\User\temp_of_water.c LARGE OPTIMIZE(9,SIZE) BROWSE ORDER INTVECTOR
                    -(0X000C) INCDIR(..\..\Libraries\Include;..\..\User;..\..\User\lib;..\..\Hardware) INTERVAL(3) DEBUG OBJECTEXTEND PRINT(.
                    -\Release\Listings\temp_of_water.lst) OBJECT(.\Release\Objects\temp_of_water.obj)

line level    source

   1          // encoding UTF-8
   2          // æ°´æ¸©æ£€æµ‹æºç¨‹åº
   3          #include "temp_of_water.h"
   4          
   5          // å®ç‰©æ˜¯æ£€æµ‹NTCçƒ­æ•ç”µé˜»çš„åˆ†å‹
   6          
   7          // æ°´æ¸©æ£€æµ‹å‡½æ•°ï¼Œå¦‚æœæ°´æ¸©è¿‡é«˜ï¼Œä¼šå‘é€æ°´æ¸©æŠ¥è­¦ï¼Œæ°´æ¸©æ¢å¤æ­£å¸¸æ—¶ï¼Œæ‰å‘é€è§£é
             -™¤æ°´æ¸©æŠ¥è­¦
   8          void temp_of_water_scan(void)
   9          {
  10   1          static u32 over_heat_accumulate_cnt = 0;    // è¿‡çƒ­ç´¯è®¡è®¡æ•°
  11   1          static u32 cooling_down_accumulate_cnt = 0; // å†·å´ç´¯è®¡è®¡æ•°
  12   1          static u32 temp_of_water_update_time_cnt = 0;
  13   1      
  14   1          adc_sel_pin(ADC_PIN_TEMP_OF_WATER);
  15   1          adc_val = adc_getval();                     //
  16   1          temp_of_water_update_time_cnt += ONE_CYCLE_TIME_MS;
  17   1      
  18   1          // å¦‚æœå¤„äºæ°´æ¸©æŠ¥è­¦
  19   1          if (adc_val <= TEMP_OF_WATER_CANCEL_WARNING_AD_VAL)
  20   1          {
  21   2              // å¦‚æœæ£€æµ‹åˆ°æ°´æ¸© ä½äº è§£é™¤æ°´æ¸©æŠ¥è­¦çš„é˜ˆå€¼
  22   2              cooling_down_accumulate_cnt++;
  23   2              // æ¸…é™¤æ°´æ¸©è¿‡çƒ­è®¡æ•°
  24   2              over_heat_accumulate_cnt = 0;
  25   2          }
  26   1          else
  27   1          {
  28   2              cooling_down_accumulate_cnt = 0;
  29   2          }
  30   1      
  31   1          if (cooling_down_accumulate_cnt >= (TEMP_OF_WATER_ACCUMULATE_TIEM_MS / ONE_CYCLE_TIME_MS))
  32   1          {
  33   2              // å¦‚æœè§£é™¤æ°´æ¸©æŠ¥è­¦çš„è®¡æ•°å¤§äº (æ°´æ¸©æ£€æµ‹çš„ç´¯è®¡æ—¶é—´ / ä¸€è½®ä¸»å¾ªç¯çš„æ—¶é—´
             -)ï¼Œ
  34   2              // å³ï¼Œæ£€æµ‹åˆ°å¯ä»¥è§£é™¤æ°´æ¸©æŠ¥è­¦çš„æ—¶é—´ å¤§äº æ°´æ¸©æ£€æµ‹çš„ç´¯è®¡æ—¶é—´
  35   2              cooling_down_accumulate_cnt = 0; // æ¸…é™¤è®¡æ•°
  36   2              fun_info.flag_is_in_water_temp_warning = 0;
  37   2              flag_set_temp_of_water_warning = 1; // å‘é€è§£é™¤æ°´æ¸©æŠ¥è­¦çš„ä¿¡æ¯
  38   2          }
  39   1      
  40   1          // å¦‚æœä¸å¤„äºæ°´æ¸©æŠ¥è­¦
  41   1          if (adc_val >= TEMP_OF_WATER_WARNING_AD_VAL)
  42   1          {
  43   2              over_heat_accumulate_cnt++;
  44   2              // æ¸…é™¤è§£é™¤æ°´æ¸©æŠ¥è­¦çš„è®¡æ•°
  45   2              cooling_down_accumulate_cnt = 0;
  46   2          }
  47   1          else
  48   1          {
  49   2              // æœ‰ä¸€æ¬¡æ²¡æœ‰æ£€æµ‹åˆ°æ°´æ¸©è¿‡çƒ­ï¼Œæ¸…é™¤æ°´æ¸©è¿‡çƒ­è®¡æ•°
  50   2              over_heat_accumulate_cnt = 0;
  51   2          }
C51 COMPILER V9.60.7.0   TEMP_OF_WATER                                                     07/11/2025 11:11:29 PAGE 2   

  52   1      
  53   1          if (over_heat_accumulate_cnt >= (TEMP_OF_WATER_ACCUMULATE_TIEM_MS / ONE_CYCLE_TIME_MS))
  54   1          {
  55   2              // å¦‚æœæ°´æ¸©æŠ¥è­¦çš„è®¡æ•°å¤§äº (æ°´æ¸©æ£€æµ‹çš„ç´¯è®¡æ—¶é—´ / ä¸€è½®ä¸»å¾ªç¯çš„æ—¶é—´)ï¼Œ
  56   2              // å³ï¼Œæ£€æµ‹åˆ°æ°´æ¸©æŠ¥è­¦çš„æ—¶é—´ å¤§äº æ°´æ¸©æ£€æµ‹çš„ç´¯è®¡æ—¶é—´
  57   2              over_heat_accumulate_cnt = 0; // æ¸…é™¤è®¡æ•°
  58   2              fun_info.flag_is_in_water_temp_warning = 1;
  59   2              flag_set_temp_of_water_warning = 1; // å‘é€æ°´æ¸©æŠ¥è­¦çš„ä¿¡æ¯
  60   2          }
  61   1      
  62   1          if (temp_of_water_update_time_cnt >= TEMP_OF_WATER_UPDATE_TIME_MS)
  63   1          {
  64   2              // å¦‚æœåˆ°äº†å‘é€æ°´æ¸©æŠ¥è­¦/å‘é€è§£é™¤æ°´æ¸©æŠ¥è­¦çš„æ—¶é—´ï¼Œå‘é€ä¸€æ¬¡å½“å‰çš„çŠ¶æ€
  65   2              temp_of_water_update_time_cnt = 0;
  66   2              flag_set_temp_of_water_warning = 1; // 
  67   2      
  68   2              // P20 = ~P20; // æµ‹è¯•å‘ç°,TEMP_OF_WATER_UPDATE_TIME_MS == 1000æ—¶ï¼Œæ¯2.28så‘é€ä¸€æ¬¡çŠ¶æ€
             -
  69   2          }
  70   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    238    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     12    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
